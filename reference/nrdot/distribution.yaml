# NRDOT distribution configuration with trace-aware reservoir sampler
# This file should be used to modify the official NRDOT distribution.yaml
dist: nrdot-reservoir  # Custom distribution name
output_path: ./_dist
otelcol_version: 0.98.0  # Use the same version as the official NRDOT build
go: "1.21"  # Make sure this matches the Go version used by NRDOT

module: github.com/newrelic/opentelemetry-collector-builder/main

extensions:
  - github.com/open-telemetry/opentelemetry-collector-contrib/extension/healthcheckextension
  - github.com/open-telemetry/opentelemetry-collector-contrib/extension/pprofextension
  - github.com/open-telemetry/opentelemetry-collector-contrib/extension/ballastextension
  # Required for reservoir sampler persistent storage
  - github.com/open-telemetry/opentelemetry-collector-contrib/extension/filestorageextension
  # Include any other extensions used in NRDOT

receivers:
  - github.com/open-telemetry/opentelemetry-collector-contrib/receiver/otlpreceiver
  - github.com/open-telemetry/opentelemetry-collector-contrib/receiver/hostmetricsreceiver
  # Include any other receivers used in NRDOT

processors:
  - go.opentelemetry.io/collector/processor/batchprocessor
  - go.opentelemetry.io/collector/processor/memorylimiterprocessor
  # Add the trace-aware reservoir sampler processor
  - github.com/deepaksharma/trace-aware-reservoir-otel/internal/processor/reservoirsampler
  # Include any other processors used in NRDOT

exporters:
  - github.com/open-telemetry/opentelemetry-collector-contrib/exporter/otlphttpexporter
  - github.com/open-telemetry/opentelemetry-collector-contrib/exporter/loggingexporter
  # Include any other exporters used in NRDOT

replaces:
  # Add any necessary replaces directives here
  # For example, if you need to replace deprecated packages
  # Example: - github.com/boltdb/bolt -> go.etcd.io/bbolt v1.3.7